{% extends "base.html" %}
{% block title %}Account Settings{% endblock %}

{% block content %}

<div class="form-container">
  <br>
  <div class="row mt-5">
    <!-- Flash message -->
    {% with messages = get_flashed_messages(with_categories = true) %}
    {% if messages %}
    {% for cat, mess in messages %}
    {% if cat == "error" %}
    <div class="alert alert-danger" role="alert">
      {{ mess }}
      <button type="button" class="close" data-dismiss="alert">
        <span aria-hidden="true" class="close-btn">&times;</span>
      </button>
    </div>
    {% else %}
    <div class="alert alert-success" role="alert">
      {{ mess }}
      <button type="button" class="close" data-dismiss="alert">
        <span aria-hidden="true" class="close-btn">&times;</span>
      </button>
    </div>
    {% endif %}
    {% endfor %}
    {% endif %}
    {% endwith %}
  </div>

  <div class="row">
    <h2 class="mb-sm-4 px-4">Cài đặt tài khoản cá nhân</h2>
  </div>

  <div class="row rounded mb-5 px-3 py-4 m-2">
    <form class="form-inline"
      action="http://127.0.0.1:5000/patient/update-email" method="post">
      <label for="basic-url">
        <h4>Nhập email mới của bạn</h4>
      </label>
      <div class="input-group mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text" id="basic-addon3">users/</span>
        </div>
        <input type="email" class="form-control" id="basic-url"
          aria-describedby="basic-addon3" name="new_email" />
        <button type="submit" class="btn btn-outline-dark col-2">Lưu</button>
      </div>
    </form>
  </div>

  <div class="row rounded mb-5 px-3 py-4 m-2">
    <form class="form-inline"
      action="http://127.0.0.1:5000/patient/update-password" method="post">
      <div class="form-group">
        <label for="inputPassword6">
          <h4>Password</h4>
        </label>
        <input type="password" id="inputPassword6" class="form-control"
          aria-describedby="passwordHelpInline" name="new_password" />
        <small id="passwordHelpInline" class="text-muted"> Nhập mật khẩu
          mới</small>
      </div>
      <button type="submit"
        class="btn btn-outline-dark bx-pull-right col-2">Lưu</button>
    </form>
  </div>

  <div class="row border border-danger-subtle rounded mb-5 px-3 py-4 m-2">
    <div class="row">
      <h4>Xóa tài khoản cá nhân</h4>
      <p class="mb-3">
        Xóa vĩnh viễn Tài khoản cá nhân của bạn và tất cả nội dung của nó khỏi
        nền tảng StrokePrediction.
        Hành động này không thể đảo ngược, vì vậy hãy tiếp tục một cách thận
        trọng.
      </p>
      <!-- Button trigger modal -->
      <button class="btn btn-outline-danger col-auto mx-3" data-toggle="modal"
        data-target="#exampleModal">
        Xác nhận xóa
      </button>

      <!-- Modal -->
      <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Xóa tài khoản cá
                nhân</h5>
              <button type="button" class="close" data-dismiss="modal"
                aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <form action="http://127.0.0.1:5000/patient/delete" method="post">
              <div class="modal-body">
                <h5 class="text-danger">Hành động này là không thể khôi phục.
                  Hãy chắc chắn</h5>
                <div class="form-group">
                  <label for="recipient-name" class="col-form-label">Nhập email
                    của bạn đề tiếp tục: </label>
                  <input type="text" class="form-control" id="recipient-name"
                    name="email" />
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary"
                  data-dismiss="modal">Hủy thao tác</button>
                <button type="submit" class="btn btn-primary">Đồng ý
                  xóa</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}